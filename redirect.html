<html>

<head>
<!-- This code is licensed under GNU GPL v3 -->
<!-- You are allowed to freely copy, distribute and use this code, but removing author credit is strictly prohibited -->

<!-- IMPORTANTT: You trigger the redirect with http://example.com/redirect.html?u=http://new-example.com-->

<!-- REDIRECTING STARTS -->

<noscript>
    <meta http-equiv="refresh" content="4;URL=https://google.com">
    <!-- // If no JS - static redirect -->
</noscript>
<!--[if lt IE 9]><script type="text/javascript">var IE_fix=true;</script><![endif]-->
<script type="text/javascript">
    var fallback = "https://google.com"; // fallback redirect if missing url parameter
    var time = 2500;

    const queryString = window.location.search;
    const urlParams = new URLSearchParams(queryString);
    const url = urlParams.get('u');

    if(typeof IE_fix != "undefined") // IE8 and lower fix to pass the http referer
    {
        document.write("redirecting..."); // Don't remove this line or appendChild() will fail because it is called before document.onload to make the redirect as fast as possible. Nobody will see this text, it is only a tech fix.
        var referLink = document.createElement("a");
        referLink.href = url;
        document.body.appendChild(referLink);
        referLink.click();
    }
    else { 

        if (urlParams.has('u')) {

            setTimeout(function(){
                window.location.replace(url); // The URL that will be redirected too.
            }, time); // The bigger the number the longer the delay.

        }
        else {
            setTimeout(function(){
                window.location.replace(fallback); // The URL that will be redirected too.
            }, time);
        }
    }
     // All other browsers
</script>
<!-- Credit goes to http://insider.zone/ + https://gist.github.com/benjiwheeler -->
<!-- REDIRECTING ENDS -->
</head>
wait...
</html>
